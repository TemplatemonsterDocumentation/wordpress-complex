!function(t){"use strict";t(document).ready(function(){function i(){t(d).each(function(){var i=t(this);i.on("click",function(o){if(o.preventDefault(),!i.hasClass("in_wishlist")){var a=tmWoowishlist.ajaxurl,d={action:"tm_woowishlist_add",pid:i.data("id"),nonce:i.data("nonce"),single:i.hasClass("tm-woowishlist-button-single")};i.removeClass(n).addClass(e),t.post(a,d,function(t){if(i.removeClass(e),t.success){i.addClass(n).find(".text").text(tmWoowishlist.addedText),t.data.wishlistPageBtn&&i.after(t.data.wishlistPageBtn);var o={action:"tm_woowishlist_update"};s(null,o)}})}})})}function s(i,s){i&&i.preventDefault();var o=tmWoowishlist.ajaxurl,l=t("div.tm-woocomerce-wishlist-widget-wrapper"),c=t("div.tm-woowishlist");s.isWishlistPage=!!c.length,s.isWidget=!!l.length,("tm_woowishlist_update"!==s.action||s.isWishlistPage||s.isWidget)&&(s.isWishlistPage&&(s.wishListData=JSON.stringify(c.data())),c.addClass(e),l.addClass(e),t.post(o,s,function(i){c.removeClass(e),l.removeClass(e),i.success&&(s.isWishlistPage&&t("div.tm-woowishlist-wrapper").html(i.data.wishList),s.isWidget&&l.html(i.data.widget),"tm_woowishlist_remove"===s.action&&(t(d+"[data-id="+s.pid+"]").removeClass(n).find(".text").text(tmWoowishlist.addText),t(d+"[data-id="+s.pid+"]").next(".tm-woowishlist-page-button").remove())),a()}))}function o(i){console.log(i);var o=t(i.currentTarget),a={action:"tm_woowishlist_remove",pid:o.data("id"),nonce:o.data("nonce")};s(i,a)}function a(){t(".tm-woowishlist-remove").off("click").on("click",function(t){o(t)})}var e="loading",n="added in_wishlist",d="button.tm-woowishlist-button";a(),i(),t(document).on("tm_wc_products_changed",function(){a(),i()})})}(jQuery);