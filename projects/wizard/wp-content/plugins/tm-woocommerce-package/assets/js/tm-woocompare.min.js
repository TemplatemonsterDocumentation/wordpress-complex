!function(o){"use strict";o(document).ready(function(){function t(t,e){t&&t.preventDefault();var a=tmWoocompare.ajaxurl,c=o("div.tm-woocompare-widget-wrapper"),n=o("div.tm-woocompare-list");e.isComparePage=!!n.length,e.isWidget=!!c.length,("tm_woocompare_update"!==e.action||e.isComparePage||e.isWidget)&&(n.addClass("loading"),c.addClass("loading"),o.post(a,e,function(t){n.removeClass("loading"),c.removeClass("loading"),t.success&&(e.isComparePage&&(o("div.tm-woocompare-wrapper").html(t.data.compareList),o(document).trigger("enhance.tablesaw")),e.isWidget&&c.html(t.data.widget),"tm_woocompare_empty"===e.action&&(o("button.tm-woocompare-button").removeClass("added in_compare").find(".text").text(tmWoocompare.compareText),o(".tm-woocompare-page-button").remove()),"tm_woocompare_remove"===e.action&&(o("button.tm-woocompare-button[data-id="+e.pid+"]").removeClass("added in_compare").find(".text").text(tmWoocompare.compareText),o("button.tm-woocompare-button[data-id="+e.pid+"]").next(".tm-woocompare-page-button").remove())),m()}))}function e(e){var a=o(e.target),m={action:"tm_woocompare_remove",pid:a.data("id"),nonce:a.data("nonce")};t(e,m)}function a(o){var e={action:"tm_woocompare_empty"};t(o,e)}function m(){o(".tm-woocompare-remove-from-list").off("click").on("click",function(o){e(o)}),o(".empty_compare_button").off("click").on("click",function(o){a(o)})}o("button.tm-woocompare-button").each(function(){var e=o(this);e.on("click",function(a){a.preventDefault();var m=tmWoocompare.ajaxurl,c={action:"tm_woocompare_add_to_list",pid:e.data("id"),nonce:e.data("nonce")};e.removeClass("added in_compare").addClass("loading"),o.post(m,c,function(a){if(e.removeClass("loading"),a.success){switch(a.data.action){case"add-to-list":e.addClass("added in_compare").find(".text").text(tmWoocompare.removeText),tmWoocompare.isSingle&&e.after(a.data.comparePageBtn);break;case"remove-from-list":e.removeClass("added in_compare").find(".text").text(tmWoocompare.compareText),o(".tm-woocompare-page-button").remove()}var m={action:"tm_woocompare_update"};t(null,m)}})})}),m()})}(jQuery);