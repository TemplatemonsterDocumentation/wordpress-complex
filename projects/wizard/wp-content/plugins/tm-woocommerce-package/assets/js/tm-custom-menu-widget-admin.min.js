!function(i){"use strict";var t={init:function(i,t){var e=t.find(".tm_custom_menu_widget_add_media"),n=t.find(".tm_custom_menu_widget_img"),d=n.find(".banner_remove"),m=t.find(".tm_custom_menu_widget_id");e.on("click",function(i){if(t)return void t.open();var t=wp.media.frames.downloadable_file=wp.media({title:customMenuWidgetAdmin.mediaFrameTitle,multiple:!1});t.on("select",function(){var i=t.state().get("selection").first().toJSON();n.show().find(" > div").attr({style:"background-image: url("+i.sizes.thumbnail.url+");"}),e.hide(),m.val(i.id).trigger("change")}),t.open()}),d.on("click",function(){n.removeAttr("style").hide(),e.show(),m.val("").trigger("change")})}};i("#widgets-right").find("div.widget[id*=tm_custom_menu_widget]").each(function(){t.init("init",i(this))}),i(document).on("widget-updated widget-added",function(i,e){e.is("[id*=tm_custom_menu_widget]")&&t.init(i,e)})}(jQuery);