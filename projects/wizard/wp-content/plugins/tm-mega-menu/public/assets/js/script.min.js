!function(e){"use strict";var t,n,i=e.event;t=i.special.debouncedresize={setup:function(){e(this).on("resize",t.handler)},teardown:function(){e(this).off("resize",t.handler)},handler:function(e,a){var s=this,o=arguments,r=function(){e.type="debouncedresize",i.dispatch.apply(s,o)};n&&clearTimeout(n),a?r():n=setTimeout(r,t.threshold)},threshold:150},e.fn.megaMenu=function(t){var n,i,a=e(this),s=1200,o=970,r=a.data("mobile-trigger"),l=".tm-mega-menu-sub",u="mega-menu-mobile-on",d=".tm-mega-menu-mobile-trigger",c=".tm-mega-menu-has-children",m="tm-in-transition",f="tm-mega-menu-hover",h="tm-mega-no-js",g="item-hide-mobile",p="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints||window.innerWidth<=r;a.settings=e.extend({effect:a.data("effect"),parent:a.data("parent-selector"),direction:a.data("direction"),duration:a.data("duration"),mobileButton:a.data("mobile-button")},t);var b=function(e){return!!e.parents("li.item-type-megamenu").length},v=function(){window.innerWidth<=r?w():C()},w=function(){k(),i||(a.addClass(u).siblings(d).addClass(u),i=!0)},C=function(){x(),(i||void 0===i)&&(a.removeClass(u).siblings(d).removeClass(u),i=!1)},y=function(t){var n=0;return 0<=t.indexOf("%")&&(n=e(a.settings.parent).width()*parseInt(t)/100),0<=t.indexOf("px")&&(n=parseInt(t)),n},k=function(){e("li"+c,a).each(function(){e(this).children("a").removeAttr("style")})},x=function(){e("li"+c,a).each(function(){var t,n=e(this),i=e(this).children("a"),r=null,u=n.data("sub-type"),d=Math.min(e(document).width(),window.innerWidth),c=n.data("sub-position"),m={},f=a.settings.parent;if("standard"!==u&&(r="100%"),"fullwidth"!=c&&(d>=s?r=n.data("width-fullscreen"):d>=o&&s>d?r=n.data("width-desktop"):o>d&&(r=n.data("width-tablet"))),"megamenu"===u)switch(c){case"fullwidth":r=y(r),m.left=e(f).offset().left-a.offset().left+parseInt(e(f).css("padding-left"))+parseInt(e(f).css("border-left-width"));break;case"left-parent":t=n.offset().left-e(f).offset().left,m.left=t,m.right="auto","100%"==r&&t>0&&(r="auto",m.right=0)}null!==r&&(m.width=r),i.siblings(l).css(m)})},T=function(e){i||(e.parent().addClass(m).removeClass(f).triggerHandler("closePanel"),clearTimeout(n),n=setTimeout(function(){e.closest(".menu-item").removeClass(m)},a.settings.duration))},z=function(e){e.parent().removeClass(m).addClass(f).triggerHandler("openPanel"),e.parent().siblings().removeClass(m)},M=function(){var e="li"+c,t="a > label",n=e+" > "+t+", "+e+" > .menu-link-wrapper > "+t;a.on("click.megaMenu",n,I)},I=function(t){var n=e(t.target),i=n.closest("li");i.hasClass(g)&&a.hasClass(u)},P=function(){i||e("li"+c,a).on("hover",B)},B=function(t){var n=e(t.currentTarget),i=n.children("a");b(n)||("mouseenter"==t.type&&z(i),"mouseleave"==t.type&&T(i))},W=function(){if(a.settings.mobileButton){var t=e(".tm-mega-menu-mobile-trigger-box");e(a.settings.mobileButton).click(function(){t.prop("checked",!t.prop("checked"))})}},j=function(){a.removeClass(h),e(window).on("debouncedresize",function(){v(),p?M():P()}).trigger("debouncedresize"),W()};j()},e(".tm-mega-menu").megaMenu()}(jQuery);