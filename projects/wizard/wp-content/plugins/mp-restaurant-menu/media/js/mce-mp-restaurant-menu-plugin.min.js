!function(e){"use strict";tinymce.PluginManager.add("mp_restaurant_menu",function(t,n){function r(){e(document).on("change","[name=shortcode_name]",function(){var t=e(this).val();i(t)})}function i(t){_.isUndefined(t)&&(t="categories");var n={action:"get_shortcode_by_type",controller:"popup",type:t};MP_RM_Registry._get("MP_RM_Functions").wpAjax(n,function(t){e("#mprm-shortcode-html-container").html(t.html),a()},function(e){console.warn("Some error!!!"),console.warn(e)})}function a(){e(document).on("change",'[name="view"]',function(){var t=e(this).val();"simple-list"===t?(e('[name="price_pos"]',".mprm-line").parents("div.mprm-line").removeClass("mprm-hidden"),e('[name="buy"]',".mprm-line").parents("div.mprm-line").addClass("mprm-hidden"),e('[name="feat_img"]',".mprm-line").parents("div.mprm-line").addClass("mprm-hidden"),e('[name="categ_name"] option[value="with_img"]',".mprm-line").addClass("mprm-hidden")):(e('[name="price_pos"]',".mprm-line").parents("div.mprm-line").addClass("mprm-hidden"),e('[name="buy"]',".mprm-line").parents("div.mprm-line").removeClass("mprm-hidden"),e('[name="feat_img"]',".mprm-line").parents("div.mprm-line").removeClass("mprm-hidden"),e('[name="categ_name"] option[value="with_img"]',".mprm-line").removeClass("mprm-hidden"))})}function o(){e(document).on("click.insert","[data-selector=insert_shortcode]",function(){var n=s(e("[data-selector=shortcode-form]")),r=wp.shortcode.string({tag:n.name,attrs:n.attrs,type:"single"});t.insertContent(r),jbox.close()})}function m(){e(document).on("click",'[data-selector="shortcode-form"] input[type="checkbox"]',function(){e(this).attr("checked")?e(this).val("1"):e(this).val("0")})}function s(t){var n={attrs:{},name:""};return t.find("[data-selector=data-line]").each(function(t,r){if(e(r).is(":visible")){var i=e(r).find("[data-selector=form_data]");i.length&&(_.isArray(i.val())?n.attrs[i.attr("name")]=i.val().join(","):n.attrs[i.attr("name")]=_.isNull(i.val())?"":i.val())}}),n.name=e("[data-selector=shortcode_name]").val(),n}var c="Insert Restaurant Menu Shortcode";t.addButton("mp_add_menu",{title:c,image:n+"/../img/shortcode-icon.png",onclick:function(){MP_RM_Registry._get("MP_RM_Functions").callModal("",function(){window.jbox=this,MP_RM_Registry._get("MP_RM_Functions").wpAjax({controller:"popup",action:"get_shortcode_builder"},function(e){jbox.setContent(e)},function(e){console.warn(e)})},{title:c,width:500,height:600})}}),r(),m(),a(),o()})}(window.jQuery);
